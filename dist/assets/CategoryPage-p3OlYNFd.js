import{_ as E,d as r,x as V,L as Z,k as J,g as M,f as h,o as n,c as u,m as s,a as w,G as P,F as S,s as C,u as j,S as O,b as B,t as b,w as F,C as q,A as G,B as K,z as $,q as R,J as T,K as U}from"./index-ZqUB2-C7.js";import{a as H,_ as Q}from"./ProductItem-U2e9palM.js";const W=f=>(T("data-v-940190ec"),f=f(),U(),f),X={class:"main flex-auto"},Y={class:"flex justify-between items-center"},ee={class:"flex justify-between items-start mb-8 lg:flex-row flex-col gap-5"},te={class:"flex gap-2.5 flex-wrap justify-start"},ae=["onClick"],oe={class:"catalog-search-item lg:w-auto w-full flex lg:flex-col justify-between items-center gap-3.5 flex-row"},le={class:"dropdown w-full relative max-w-72"},re=W(()=>s("span",null,null,-1)),se={class:"px-3 w-full border border-gray-300 border-solid rounded-lg py-2 px-1 text-gray-400 absolute z-20 bg-white"},ce=["onClick"],ne={class:"grid lg:grid-cols-3 xl:grid-cols-4 mb-12 gap-y-3.5 gap-x-3.5 sm:grid-cols-2"},ue={__name:"CategoryPage",setup(f){r("Ваша категорія");const i=r(""),x=V(),k=Z(),o=r([]),v=r([]),g=r(""),p=r(""),m=r("");r(5);const _=r(""),A=r([{value:"Price",name:"Price"},{value:"A-z",name:"A-Z"},{value:"Z-a",name:"Z-A"}]),y=r(!1);r("Sort by:");function D(){y.value=!y.value}const d=()=>{if(o.value=[],x.productList&&x.productList.length>0)x.productList.forEach(t=>{t.category_id==i.value&&o.value.push(t)}),localStorage.setItem("categoryList",JSON.stringify(o.value));else{const t=localStorage.getItem("categoryList");t&&(o.value=JSON.parse(t))}},L=t=>{g.value="",o.value.forEach(a=>{console.log(a.category_id),(a.category_id===parseInt(t)||a.category_id===parseInt(t.value))&&a.category_for&&(g.value=a.category_for)}),console.log(g.value)},I=()=>{v.value=[],o.value.forEach(t=>{t.category_name&&!v.value.some(a=>a.name===t.category_name)&&v.value.push({name:t.category_name})})},N=t=>{d(),_.value=t;const a=o.value.filter(e=>e.category_name===t);console.log(a),a.length>0?o.value.splice(0,o.value.length,...a):d()},z=(t,a)=>{p.value=t,y.value=!1,console.log(p.value)};return J(()=>{const t=t.value.trim().toLowerCase();return console.log(o.value),o.value.filter(a=>a.product_name.includes(t))}),M(()=>{i.value=k.params.id,d(),I(),L(i)}),h(()=>k.params.id,(t,a)=>{i.value=t,d(),I(),L(i.value)},{deep:!0}),h(()=>p.value,(t,a)=>{let e=[...o.value];switch(t){case"Price":e.sort((l,c)=>l.product_price-c.product_price);break;case"A-z":e.sort((l,c)=>l.product_name.localeCompare(c.product_name));break;case"Z-a":e.sort((l,c)=>c.product_name.localeCompare(l.product_name));break}console.log(e),o.value=e,console.log(o.value)}),h(()=>m.value,(t,a)=>{const e=t.trim().toLowerCase();if(e==="")d();else{const l=o.value.filter(c=>c.product_name.includes(e));o.value=l}}),(t,a)=>(n(),u("div",X,[s("div",Y,[w(H,{class:"font-bold text-4xl mb-8",label:g.value},null,8,["label"])]),s("div",ee,[s("ul",te,[s("li",{class:P(["flex justify-center w-full flex border border-gray-300 border-solid rounded-lg transform motion-safe:hover:hover:bg-gray-300 transition max-w-36 text-center",{"active-category":_.value==="default"||_.value===""}])},[s("button",{type:"button",class:"w-full py-2 px-3 text-gray-400 text-center hover:text-white",onClick:a[0]||(a[0]=e=>N("default"))},"Всі")],2),(n(!0),u(S,null,C(v.value,(e,l)=>(n(),u("li",{class:P(["flex justify-center w-full flex border border-gray-300 border-solid rounded-lg transform motion-safe:hover:hover:bg-gray-300 transition max-w-36 text-center",{"active-category":e.name===_.value}]),key:l},[s("button",{type:"button",class:"w-full py-2 px-3 text-gray-400 text-center hover:text-white",onClick:c=>N(e.name)},b(e.name),9,ae)],2))),128))]),s("div",oe,[w(O,{icon:j($).search,value:m.value,"onUpdate:value":a[1]||(a[1]=e=>m.value=e)},null,8,["icon","value"]),B(" "+b(m.value)+" ",1),s("div",le,[w(q,{onClick:a[2]||(a[2]=e=>D()),class:"pl-3 w-full flex border border-gray-300 border-solid rounded-lg py-2 px-1 text-gray-400 justify-between",iconSvg:j($).arrow},{default:F(()=>[B(" Sort by: "+b(p.value)+" ",1),re]),_:1},8,["iconSvg"]),G(s("ul",se,[(n(!0),u(S,null,C(A.value,(e,l)=>(n(),u("li",{key:l,class:"block w-full cursor-pointer border-b hover:text-gray-700"},[s("button",{type:"button",class:"w-full text-left",onClick:c=>z(e.value)},"Sort by: "+b(e.name),9,ce)]))),128))],512),[[K,y.value]])])])]),s("div",ne,[(n(!0),u(S,null,C(o.value,(e,l)=>(n(),R(Q,{key:l,item:e,id:e.product_id,thumb:e.product_thumb,name:e.product_name,price:e.product_price,options:e.options,currency:e.product_cur_symbol,manufacturer:e.category_name},null,8,["item","id","thumb","name","price","options","currency","manufacturer"]))),128))])]))}},fe=E(ue,[["__scopeId","data-v-940190ec"]]);export{fe as default};
